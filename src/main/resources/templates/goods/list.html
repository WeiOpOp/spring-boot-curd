<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>宾馆售货情况统计系统 </title>
    <meta charset="UTF-8"/>
    <#import "app.ftl" as m>
	<@m.head/>
</head>
<body>
	<form id="QueryForm" name="QueryForm" action="/list" method="post">
	<!-- 搭建显示页面 -->
	<div class="container">
		<!-- 标题 -->
		<div class="row">
			<div class="col-md-12">
				<h5>宾馆售货情况统计系统 </h5>
			</div>
		</div>
		<!-- 按钮 -->
		<div class="row">
			<!-- btn-group 按钮组-->
			<div class="col-md-4 btn-group">
				<button class="btn btn-primary btn-sm" type="button" id="add_btn">
					<span class="glyphicon glyphicon-plus"></span>新增
				</button>
				<button class="btn btn-primary btn-sm" type="button" onclick="refreshPage()">
					<span class="glyphicon glyphicon-refresh"></span>刷新
				</button>
				<button class="btn btn-primary btn-sm" type="button" onclick="print()">
					<span class="glyphicon glyphicon-print"></span>	打印
				</button>
				<button class="btn btn-danger btn-sm" type="button" id="delete_all_btn" onclick="delGoods('all')">
					<span class="glyphicon glyphicon-trash"></span>	批量删除
				</button>
			</div>
		</div>
		<!-- 显示表格数据 -->
		<div class="row">
			<div class="col-lg-12" style="width:1500px">
				<table class="table table-hover"  style="font-size:12px;" id="emps_table">
					<thead>
						<tr>
							<th>
								<input type="checkbox" name="checkedAll" title="全选/反选" onclick="selectAll()" />
							</th>
				            <th>宾馆名称</th>
				            <th>日期</th>
				            <th>床单</th>
				            <th>被罩</th>
				            <th>枕巾</th>
				            <th>浴巾</th>
				            <th>面巾</th>
				            <th>浴袍</th>
				            <th>窗帘</th>
				            <th>窗纱</th>
				            <th>汗蒸服</th>
				            <th>大台布</th>
				            <th>小台布</th>
				            <th>操作</th>
						</tr>
					</thead>
					<tbody>
					<#if pageInfo.list??>
		    		<#list pageInfo.list as good>
			    		<tr>
			    			<td>
			    				<input type="checkbox" class="check_item" name="check" value="${good.id}"></input>
			    			</td>
			    			<td>${good.hotelName?default('')}</td>
			    			<td>${good.createTimeStr?default('')}</td>
			    			<td>${good.chuangdan!0} * ${good.chuangdanNum!0} = ${good.chuangdan*good.chuangdanNum}</td>
			    			<td>${good.beizhao!0} * ${good.beizhaoNum!0} = ${good.beizhao*good.beizhaoNum!0}</td>
			    			<td>${good.zhenjin!0} * ${good.zhenjinNum!0} = ${good.zhenjin*good.zhenjinNum!0}</td>
			    			<td>${good.yujin!0} * ${good.yujinNum!0} = ${good.yujin*good.yujinNum!0}</td>
			    			<td>${good.mianjin!0} * ${good.mianjinNum!0} = ${good.mianjin*good.mianjinNum!0}</td>
			    			<td>${good.yupao!0} * ${good.yupaoNum!0} = ${good.yupao*good.yupaoNum!0}</td>
			    			<td>${good.chuanglian!0} * ${good.chuanglianNum!0} = ${good.chuanglian*good.chuanglianNum!0}</td>
			    			<td>${good.chuangsha!0} * ${good.chuangshaNum!0} = ${good.chuangsha*good.chuangshaNum!0}</td>
			    			<td>${good.hanzhengfu!0} * ${good.hanzhengfuNum!0} = ${good.hanzhengfu*good.hanzhengfuNum!0}</td>
			    			<td>${good.taibuDa!0} * ${good.taibuDaNum!0} = ${good.taibuDa*good.taibuDaNum!0}</td>
			    			<td>${good.taibuXiao!0} * ${good.taibuXiaoNum!0} = ${good.taibuXiao*good.taibuXiaoNum!0}</td>
			    			<td>
			    				<button class="btn btn-primary btn-sm edit_btn btn-xs" type="button" id="edit_btn" onclick="editGoods(${good.id?default('')})">
			    					<span class="glyphicon glyphicon-pencil"></span> 编辑
			    				</button>
			    				<button class="btn btn-danger btn-sm delete_btn btn-xs" type="button" id="del_btn" onclick="delGoods(${good.id?default('')})">
			    					<span class="glyphicon glyphicon-trash"></span> 删除
			    				</button>
			    			</td>
			    		</tr>
		    		</#list>
		    		</#if>
					</tbody>
				</table>
			</div>
		</div>

		<!-- 显示分页信息 -->
		<div class="row">
			<!--分页文字信息  -->
			<div class="col-md-6" id="page_info_area">
				当前${pageInfo.pageNum}页, 总${pageInfo.pages}页, 总${pageInfo.total}条记录
			</div>
			<!-- 分页条信息 -->
			<div class="col-md-6" id="page_nav_area">
				<nav aria-label="Page navigation">
					<ul class="pagination">
						<li>
							<a href="/list?pn=1" aria-label="Previous"> 
								<span aria-hidden="true"></span>首页
							</a>
						</li>
						<#if pageInfo.hasPreviousPage == true>
							<li>
								<a href="/list?pn=${pageInfo.pageNum-1}" aria-label="Previous"> 
									<span aria-hidden="true">&laquo;</span>
								</a>
							</li>
						</#if> 
						<#list pageInfo.navigatepageNums as num>
							<#if num == pageInfo.pageNum>
								<li class="active"'><a href="/list?pn=${num}">${num}</a></li>
							</#if> 
							<#if num != pageInfo.pageNum>
								<li><a href="/list?pn=${num}">${num}</a></li>
							</#if> 
						</#list>
						<#if pageInfo.hasNextPage == true>
							<li>
								<a href="/list?pn=${pageInfo.pageNum+1}" aria-label="Next"> 
									<span aria-hidden="true">&raquo;</span>
								</a>
							</li>
						</#if>
						<li>
							<a href="/list?pn=${pageInfo.pages}" aria-label="Previous"> 
								<span aria-hidden="true"></span>末页
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
		
	</div>
    </form>
    <script type="text/javascript">
	$("#add_btn").click(function(){
		toAdd();
	});
	
	function editGoods(id){
		toEdit(id);
  	}
 	//批量删除
  	function delGoods(ids){
		if(ids == ''){
			alert('删除id为空！请检查或者联系管理员');
			return false;
		}
 		
  		if(ids == 'all'){
  			var arr = new Array();
  			$("input[type='checkbox'][name='check']:checked").each(
  				function(i){
  					arr[i]= $(this).val();
  				}
  			);
  			ids = arr.join("-");
  		}
  		//2、发送ajax请求删除员工
  		if(confirm("确认删除【"+ids+"】吗？")){
	 		$.ajax({
				url:"/delete?ids="+ids,
				async: false,
				success:function(result){
					layer.msg(result.msg);
					if(result.code == 100){
						refreshPage();
					}
				}
			}); 
  		}
  	}
  	
  	function toAdd(){
  		//弹出
    	add = layer.open({
		 	type: 2,
		 	skin:"layui-layer-lan",
		 	shadeClose: false,
		 	scrollbar: false,		 	
		 	title: ['新增', 'color:white;'],
		 	area: ['800px', '500px'],
		 	zIndex:300,
			//area: ['auto', 'auto'],
			closeBtn:1,
			content: ["/toAdd", 'yes']
		});
  	}
  	
  	function toEdit(id){
  		//弹出
    	edit = layer.open({
		 	type: 2,
		 	skin:"layui-layer-lan",
		 	shadeClose: false,
		 	scrollbar: false,		 	
		 	title: ['修改', 'color:white;'],
		 	area: ['800px', '500px'],
		 	zIndex:300,
			//area: ['auto', 'auto'],
			closeBtn:1,
			content: ["/toEdit?id="+id, 'yes']
		});
  	}
  	
  	//最后一页
  	function toLastPage(){
  		window.location.href = "/list?pn="+${pageInfo.pages};
  	}
  	
  	//全选/反选
	function selectAll(){
		var checkboxs = $("input[name='check']");
		for (var i=0;i<checkboxs.length;i++) {
			var e = checkboxs[i];
			e.checked = !e.checked;
		}
	}
	//打印
  	function print(){
  		window.open("/print?pn="+${pageInfo.pages});
  	}
  	</script>
</body>
</html>